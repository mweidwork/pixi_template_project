# ===========================
# Pixi workspace configuration
# ===========================
[workspace]
name = "pixi-template-project"
channels = ["conda-forge"]
platforms = ["linux-64", "win-64"]

[tasks]
# Runs after installation
postinstall = { cmd = "pip install --no-build-isolation --no-deps --disable-pip-version-check -e ." }

[dependencies]
python = ">=3.9"
pip = "*"
setuptools = "*"
wheel = "*"

# ===========================
# Feature: test
# ===========================
[feature.test.dependencies]
pytest = ">=6"
pytest-benchmark = "*"
pytest-cov = "*"
pytest-md = "*"
mypy = ">=1.13"

[feature.test.tasks]
test = "pytest"
test-coverage = "pytest --cov=pixi_template_project --cov-report=xml --cov-report=term-missing"

# ===========================
# Feature: lint
# ===========================
[feature.lint.dependencies]
docformatter = "*"
insert-license-header = "*"
pre-commit = "*"
pre-commit-hooks = "*"
prettier = "*"
ruff = "*"
taplo = "*"
typos = "*"
mypy = "*"

[feature.lint.tasks]
pre-commit-install = "pre-commit install"
pre-commit-run = "pre-commit run -a"

# ===========================
# Environments
# ===========================
[environments]
default = ["test", "lint"]
test = ["test"]
lint = { features = ["lint"], no-default-feature = true }